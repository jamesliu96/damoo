<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0">
	<title>DAMOO</title>
	<link rel="icon" type="image/png" href="/favicon.png">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
	<style type="text/css">#dm-main,body,html{margin:0;padding:0;border:0;overflow:hidden;font:20px Menlo,monospace}html{background:0 0}body{background-color:#000}a,a:active,a:visited{color:#888;text-decoration:none}a:hover,code:hover{color:#aaa;text-decoration:underline;cursor:pointer}#dm-screen{color:#888}#dm-info{padding:10px;display:block;position:absolute;left:0;top:0;z-index:100000;background-color:hsla(0,0%,100%,.2)}</style>
</head>
<body>
	<div id="dm-main">
		<div id="dm-screen"><div id="dm-info">Damoo <span id="dm-version"></span> by <a href="https://jamesliu.info">James Liu</a> (<a href="https://github.com/jamesliu96/damoo">source code</a>)<br>press <code onclick="sendmessage()">ENTER</code> to send message<br>press <code onclick="togglestate()">SPACE</code> to suspend/resume<br>press <code onclick="clearscreen()">/</code> to clear screen<br>press <code onclick="opacitydecrease()">SHIFT + ,</code> to decrease opacity<br>press <code onclick="opacityincrease()">SHIFT + .</code> to increase opacity</div></div>
	</div>
<script type="text/javascript" src="damoo.min.js"></script>
<script type="text/javascript">
var scrn = window.document.getElementById('dm-screen');
scrn.style.width = window.innerWidth + 'px';
scrn.style.height = window.innerHeight + 'px';
scrn.style.opacity = 1;

document.getElementById('dm-version').innerHTML = Damoo.version;

var damoo = new Damoo('dm-screen', 'dm-canvas', 20, 'Helvetica');

damoo.play();

var addEvent = function(obj, nm, cb) {
	if (window.addEventListener) {
		obj.addEventListener(nm, cb, false);
	} else if (window.attachEvent) {
		obj.attachEvent('on' + nm, cb);
	}
};

damoo.emit({ text: 'Welcome to Damoo', color: '#' + Math.random().toString(16).substring(2).substring(0, 6) });

function sendmessage() {
	var text = prompt('Text?');
	if (!text) return;
	var color = prompt('Text color? (#fff)');
	var fixed = prompt('Fixed? (y/n)');
	fixed = (fixed == 'y' || fixed == 'Y');
	var shadow = prompt('Shadow? (y/n)');
	if (shadow == 'y' || shadow == 'Y') {
		shadow = { color: prompt('Shadow color? (#fff)') };
	}
	damoo.emit({ text: text, color: color, fixed: fixed, shadow: shadow });
}

function clearscreen() {
	damoo.clear();
}

function opacitydecrease() {
	if (scrn.style.opacity > 0) {
		scrn.style.opacity = Number(scrn.style.opacity) - 0.1;
	}
}

function opacityincrease() {
	if (scrn.style.opacity < 1) {
		scrn.style.opacity = Number(scrn.style.opacity) + 0.1;
	}
}

function togglestate() {
	if (damoo.state) {
		damoo.pause();
	} else {
		damoo.resume();
	}
}

addEvent(document.body, 'keypress', function(e) {
	var keyCode = e.keyCode || e.which;
	switch (keyCode) {
		case 13:
			sendmessage();
			break;
		case 47:
			clearscreen();
			break;
		case 60:
			opacitydecrease();
			break;
		case 62:
			opacityincrease();
			break;
		case 32:
			togglestate();
			break;
	}
	return false;
});

var list = [{ text: '美国 圣地亚戈 American Shengdiyage', color: '#6f9', fixed: true }
,{ text: '我们需要金坷垃', color: '#6f9', shadow: true }
,{ text: '非洲农业不发达', color: '#000', shadow: true }
,{ text: '有了金坷垃，亩产一亿⑧', color: '#fff', shadow: { color: '#f00' } }
,{ text: '日本资源太缺乏！', color: '#000', shadow: true }
,{ text: '肥料掺了金坷垃！一袋能顶两袋撒！', color: '#000', shadow: true }
,{ text: '没有金坷垃，怎么种庄稼？', color: '#f00', shadow: { color: '#6f9' } }
,{ text: '肥料掺了金坷垃不流失！不蒸发！零浪费！', color: '#b8860b', shadow: { color: '#3a5' } }
,{ text: '(╯°д°)╯︵ ┻━┻', color: '#fff' }
,{ text: '用了金坷垃小麦亩产一千八，日本的粮食再也不向美国进口了！', color: '#000', shadow: { color: '#ff0' } }
,{ text: '哈哈哈哈哈！', color: '#000', shadow: { color: '#ff0' } }
,{ text: '小鬼子，真不傻！', color: '#b8860b', shadow: true }
,{ text: '金坷垃给了他，对美国农业危害大，绝不能给他。', color: '#b8860b', shadow: true }
,{ text: '非洲农业不发达，我们都要支援他。', color: '#000', shadow: true }
,{ text: '金坷垃，你们日本别想了！', color: '#b8860b', shadow: true }
,{ text: '金坷垃！金坷垃！我们的！我们的！', color: '#f49' }
,{ text: '非洲农业不发达', color: '#000', shadow: true }
,{ text: '日本资源太缺乏！', color: '#000', shadow: true }
,{ text: '有了金坷垃，亩产一亿⑧', color: '#fff', shadow: { color: '#f00' } }
,{ text: '(╯°д°)╯︵ ┻━┻', color: '#fff' }
,{ text: '(╯°д°)╯︵ ┻━┻', color: '#fff' }
,{ text: '(╯°д°)╯︵ ┻━┻', color: '#fff' }
,{ text: '没有金坷垃，怎么种庄稼？', color: '#f00', shadow: { color: '#6f9' } }
,{ text: '没有金坷垃，怎么种庄稼？', color: '#f00', shadow: { color: '#6f9' } }
,'这一条是默认的！'
,'这一条也是！'];

var i = 0;

var demoInterval = setInterval(function() {
	if (list[i]) {
		damoo.emit(list[i++]);
	} else {
		clearInterval(demoInterval);
	}
}, 150);
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VGSPFWVGNY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VGSPFWVGNY');
</script>
</body>
</html>
